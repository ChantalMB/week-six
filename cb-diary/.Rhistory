lapply(read_html) %>%
lapply(html_node, "pre") %>%
new <- vapply(html_text, character(1))
u %>%
lapply(read_html) %>%
lapply(html_node, "pre") %>%
new <- sapply(html_text, character(1))
print(u)
print(class(u))
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
print(class(u))
u %>%
lapply(read_html) %>%
lapply(html_node, "pre") %>%
sapply(html_text, character(1))
new <- u %>%
lapply(read_html) %>%
lapply(html_node, "pre") %>%
sapply(html_text, character(1))
new <- u %>%
lapply(read_html) %>%
lapply(html_node, "pre") %>%
sapply(html_text, character(1))
print(new)
print(class(new))
new <- list()
new <- u %>%
lapply(read_html) %>%
lapply(html_node, "pre") %>%
sapply(html_text, character(1))
print(class(new))
new <- lapply(read_html) %>%
lapply(html_node, "pre") %>%
sapply(html_text, character(1))
remDr$navigate(u[1])
remDr$navigate(u[1])
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
remDr$navigate(u[1])
img_page_source<-remDr$getPageSource()
print(img_page_source)
item <- list()
item[[1]] <- page_source[[1]]
print(item)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text(trim = FALSE)})
print(pages)
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
html <- read_html(u[1)
html <- read_html(u[1])
print(class(output))
print(class(u))
html <- lapply(u, read_html)
print(html)
res <- html %>%
html_node("pre") %>%
html_text()
print(class(html))
res <- html %>%
html_node("pre") %>%
html_text()
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
doc <- lapply(u, read_html)
innerHTML <- function(x, trim = FALSE, collapse = "\n"){
paste(xml2::xml_find_all(x, ".//text()"), collapse = collapse)
}
innerHTML(doc)
item <- list()
item[[1]] <- page_source[[1]]
print(item)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text(trim = FALSE)})
print(pages)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre")})
pages <- vapply(html_text, character(1))
print(item)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text(trim = FALSE)})
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text(trim = FALSE)})
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(pages)
item <- list()
item[[1]] <- page_source[[1]]
print(item)
item %>%
html_nodes("pre") %>%
html_text()
print(length(item))
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(pages)
pages <- lapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(pages)
rD$server$stop()
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr$navigate(u[1])
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
rD$server$stop()
rD$server$stop()
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
remDr$navigate(u[1])
page_source<-remDr$getPageSource()
print(page_source[[1]])
test <- paste(u[1], sep="")
print(test)
remDr$navigate(test)
page_source<-remDr$getPageSource()
print(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("a[href*='/view/7362/']") %>% html_attr("href")})
print(pages)
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre']") %>% html_text()})
print(pages)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(pages)
output <- list()
print(length(pages))
for(row in 1:nrow(pages)){
for(col in 1:ncol(pages)){
entry <- paste(pages[row], sep = "")
output <- c(output, entry)
}
}
print(class(pages))
output <- list()
print(length(pages))
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
for(i in u){
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
#rD$server$stop()
test <- paste(i, sep="")
print(test)
remDr$navigate(test)
page_source<-remDr$getPageSource()
print(page_source[[1]])
#pages <- read_html(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(class(pages))
output <- list()
print(length(pages))
for(row in 1:nrow(pages)){
for(col in 1:ncol(pages)){
entry <- paste(pages[row], sep = "")
output <- c(output, entry)
}
}
print(class(output))
}
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
for(i in u){
#rD$server$stop()
test <- paste(i, sep="")
print(test)
remDr$navigate(test)
page_source<-remDr$getPageSource()
print(page_source[[1]])
#pages <- read_html(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(class(pages))
output <- list()
print(length(pages))
for(row in 1:nrow(pages)){
for(col in 1:ncol(pages)){
entry <- paste(pages[row], sep = "")
output <- c(output, entry)
}
}
print(class(output))
}
for(row in pages){
entry <- paste(row, sep = "")
output <- c(output, entry)
}
print(class(output))
print(output)
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
for(i in u){
#rD$server$stop()
test <- paste(i, sep="")
print(test)
remDr$navigate(test)
page_source<-remDr$getPageSource()
print(page_source[[1]])
#pages <- read_html(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
print(class(pages))
output <- list()
print(length(pages))
for(row in pages){
entry <- paste(row, sep = "")
output <- c(output, entry)
}
#  for(row in 1:nrow(pages)){
#   for(col in 1:ncol(pages)){
#      entry <- paste(pages[row], sep = "")
#     output <- c(output, entry)
#   }
# }
print(output)
}
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
for(i in u){
#rD$server$stop()
test <- paste(i, sep="")
remDr$navigate(test)
page_source<-remDr$getPageSource()
#pages <- read_html(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
output <- list()
for(row in pages){
entry <- paste(row, sep = "")
output <- c(output, entry)
}
#  for(row in 1:nrow(pages)){
#   for(col in 1:ncol(pages)){
#      entry <- paste(pages[row], sep = "")
#     output <- c(output, entry)
#   }
# }
print(output)
}
print(class(output))
u <- list("https://transcription.si.edu/view/7362/ECf5t", "https://transcription.si.edu/view/7362/ECf5u")
for(i in u){
#rD$server$stop()
test <- paste(i, sep="")
remDr$navigate(test)
page_source<-remDr$getPageSource()
#pages <- read_html(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
output <- list()
for(row in pages){
entry <- paste(row, sep = "")
output <- c(output, entry)
}
#  for(row in 1:nrow(pages)){
#   for(col in 1:ncol(pages)){
#      entry <- paste(pages[row], sep = "")
#     output <- c(output, entry)
#   }
# }
lapply(output, write, "diary.txt", append=TRUE)
}
rD$server$stop()
rD$server$stop()
library(rvest)
library(RSelenium)
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr$navigate("https://transcription.si.edu/project/7362")
for(i in 1:25){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
remDr <- rD$client
remDr$navigate("https://transcription.si.edu/project/7362")
for(i in 1:25){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
page_source<-remDr$getPageSource()
print(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("a[href*='/view/7362/']") %>% html_attr("href")})
print(pages)
rD$server$stop()
setwd("~/Desktop/HIST3814/week-six/cb-diary")
library(rvest)
library(RSelenium)
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
remDr$navigate("https://transcription.si.edu/project/7362")
for(i in 1:25){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
page_source<-remDr$getPageSource()
print(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("a[href*='/view/7362/']") %>% html_attr("href")})
print(pages)
output <- list()
print(length(pages))
for(row in 1:nrow(pages)){
for(col in 1:ncol(pages)){
fullURL <- paste("https://transcription.si.edu", pages[row], sep = "")
output <- c(output, fullURL)
}
}
for(i in output) {
navi <- paste(i, sep="")
remDr$navigate(navi)
page_source<-remDr$getPageSource()
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
output <- list()
for(row in pages){
entry <- paste(row, sep = "")
output <- c(output, entry)
}
lapply(output, write, "diary.txt", append=TRUE)
}
rD$server$stop()
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
#rD$server$stop()
i <- "https://transcription.si.edu/view/7362/ECf5u"
navi <- paste(i, sep="")
remDr$navigate(navi)
file <- read_html(navi)
file %>%
html_nodes("div") %>%
html_attrs("data-idsid")
print(file)
print(file[[1]])
print(item)
item %>%
html_nodes("div") %>%
html_attrs("data-idsid")
page_source %>%
html_nodes("div") %>%
html_attrs("data-idsid")
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("div") %>% html_attrs("data-idsid")})
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("div") %>% html_attr("data-idsid")})
print(pages)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("div") %>% html_attr(data-idsid)})
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("div") %>% html_attr("data-idsid")})
print(pages)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("id.transcription-asset-wrapper") %>% html_attr("data-idsid")})
print(pages)
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
print(pages)
file_name <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
print(file_name)
output <- list()
print(class(file_name))
output <- list()
gsub(".*AAA","",file_name)
regmatches(file_name, gregexpr("(?<=AAA).*",file_name, perl=TRUE))
print(file_name)
file_name <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
file_name <- gsub(".*AAA_","",file_name)
print(file_name)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep = "")
output <- c(output, entry)
}
print(output)
library(rvest)
library(RSelenium)
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
rD$server$stop()
library(rvest)
library(RSelenium)
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
#rD$server$stop()
i <- "https://transcription.si.edu/view/7362/ECf5u"
navi <- paste(i, sep="")
remDr$navigate(navi)
page_source<-remDr$getPageSource()
item <- list()
print(item)
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
file_name <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
file_name <- gsub(".*AAA_","",file_name)
print(file_name)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep = "")
output <- c(output, entry)
}
print(output)
for(row in pages){
entry <- paste(file_name, row, sep = "\n")
output <- c(output, entry)
}
print(output)
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
file_name <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
file_name <- gsub(".*AAA_","",file_name)
print(file_name)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="\n")
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="", collapse = NULL)
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="", collapse = TRUE)
output <- c(output, entry)
}
print(output)
output <- list()
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="", collapse)
output <- c(output, entry)
}
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="", collapse="\n")
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="", collapse="___")
output <- c(output, entry)
}
print(output)
for(row in pages){
entry <- paste(file_name, row, sep="         ")
output <- c(output, entry)
}
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="         ")
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep=" \n")
output <- c(output, entry)
}
print(output)
output
output[[1]]
output <- list()
for(row in pages){
entry <- cat(paste(file_name, row, sep=" \n"))
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- cat(paste(file_name, row, sep=" \n"))
output <- c(output, entry)
}
print(output)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="-->       ")
output <- c(output, entry)
}
print(output)
rD$server$stop()
library(rvest)
library(RSelenium)
rD <- rsDriver(port=4444L, browser="chrome", chromever="83.0.4103.39")
remDr <- rD$client
remDr$navigate("https://transcription.si.edu/project/7362")
for(i in 1:25){
remDr$executeScript(paste("scroll(0,",i*10000,");"))
Sys.sleep(3)
}
page_source<-remDr$getPageSource()
print(page_source[[1]])
item <- list()
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("a[href*='/view/7362/']") %>% html_attr("href")})
print(pages)
output <- list()
print(length(pages))
for(row in 1:nrow(pages)){
for(col in 1:ncol(pages)){
fullURL <- paste("https://transcription.si.edu", pages[row], sep = "")
output <- c(output, fullURL)
}
}
for(i in output) {
navi <- paste(i, sep="")
remDr$navigate(navi)
page_source<-remDr$getPageSource()
item <- list()
print(item)
item[[1]] <- page_source[[1]]
pages <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("pre") %>% html_text()})
file_name <- sapply(item, function(x) {x %>% read_html() %>% html_nodes("#transcription-asset-wrapper") %>% html_attr("data-idsid")})
file_name <- gsub(".*AAA_","",file_name)
print(file_name)
output <- list()
for(row in pages){
entry <- paste(file_name, row, sep="-->       ")
output <- c(output, entry)
}
lapply(output, write, "diary-pgref.txt", append=TRUE)
}
